(()=>{var e={};e.id=970,e.ids=[970],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5511:e=>{"use strict";e.exports=require("crypto")},9021:e=>{"use strict";e.exports=require("fs")},1645:e=>{"use strict";e.exports=require("net")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},4998:e=>{"use strict";e.exports=require("perf_hooks")},7910:e=>{"use strict";e.exports=require("stream")},4631:e=>{"use strict";e.exports=require("tls")},7934:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>h,routeModule:()=>p,serverHooks:()=>N,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>y});var s={};r.r(s),r.d(s,{GET:()=>c});var o=r(2706),a=r(8203),i=r(5994),n=r(9187),u=r(7579),l=r(8474),d=r(3345);async function c(e){try{let t=e.nextUrl.searchParams.get("id");if(!t)return n.NextResponse.json({error:"Homestay ID is required"},{status:400});let r=Number(t);if(isNaN(r))return n.NextResponse.json({error:"Invalid homestay ID"},{status:400});let s=await d.db.select().from(l.mO).where((0,u.eq)(l.mO.id,r)).limit(1).execute();if(!s||0===s.length)return n.NextResponse.json({error:"Homestay not found"},{status:404});return n.NextResponse.json(s[0],{status:200})}catch(e){return console.error("Error retrieving homestay details:",e),n.NextResponse.json({error:"Failed to retrieve homestay details"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/property/stays/route",pathname:"/api/property/stays",filename:"route",bundlePath:"app/api/property/stays/route"},resolvedPagePath:"/Users/deekshithmac/Desktop/home-stay/easy-stay/src/app/api/property/stays/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:m,workUnitAsyncStorage:y,serverHooks:N}=p;function h(){return(0,i.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:y})}},6487:()=>{},8335:()=>{},3345:(e,t,r)=>{"use strict";r.d(t,{db:()=>n});var s=r(5482),o=r(6675),a=r(3186);(0,s.config)({path:".env"});let i=(0,a.A)(process.env.DATABASE_URL),n=(0,o.f)({client:i})},8474:(e,t,r)=>{"use strict";r.d(t,{GS:()=>d,Vy:()=>l,mO:()=>c});var s=r(7328),o=r(9516),a=r(4799),i=r(2590),n=r(9848),u=r(7102);let l=(0,s.cJ)("users_table",{id:(0,o.vX)("id").primaryKey(),name:(0,a.Qq)("name").notNull(),username:(0,a.Qq)("username").notNull().unique(),email:(0,a.Qq)("email").notNull().unique(),password:(0,a.Qq)("password").notNull(),role:(0,a.Qq)("role").notNull().default("user"),createdAt:(0,i.vE)("created_at").notNull().defaultNow()}),d=(0,s.cJ)("hosts_table",{id:(0,o.vX)("id").primaryKey(),userId:(0,n.nd)("user_id").notNull().references(()=>l.id,{onDelete:"cascade"}),propertyIds:(0,u.Fx)("property_ids").notNull().default([])}),c=(0,s.cJ)("homestays_table",{id:(0,o.vX)("id").primaryKey(),hostId:(0,n.nd)("host_id").notNull().references(()=>d.id,{onDelete:"cascade"}),name:(0,a.Qq)("name").notNull(),description:(0,a.Qq)("description"),photos:(0,u.Fx)("photos").notNull().default([]),location:(0,u.Fx)("location").notNull(),pricePerNight:(0,n.nd)("price_per_night").notNull(),amenities:(0,u.Fx)("amenities").notNull().default([]),rating:(0,n.nd)("rating").default(0),availability:(0,u.Fx)("availability").notNull(),createdAt:(0,i.vE)("created_at").notNull().defaultNow(),updatedAt:(0,i.vE)("updated_at").notNull().$onUpdate(()=>new Date)});(0,s.cJ)("bookings_table",{id:(0,o.vX)("id").primaryKey(),userId:(0,n.nd)("user_id").notNull().references(()=>l.id,{onDelete:"cascade"}),homestayId:(0,n.nd)("homestay_id").notNull().references(()=>c.id,{onDelete:"cascade"}),checkIn:(0,i.vE)("check_in").notNull(),checkOut:(0,i.vE)("check_out").notNull(),totalPrice:(0,n.nd)("total_price").notNull(),foodSelection:(0,u.Fx)("food_selection").default([]),status:(0,a.Qq)("status").default("confirmed")}),(0,s.cJ)("menu_items_table",{id:(0,o.vX)("id").primaryKey(),homestayId:(0,n.nd)("homestay_id").notNull().references(()=>c.id,{onDelete:"cascade"}),name:(0,a.Qq)("name").notNull(),description:(0,a.Qq)("description"),price:(0,n.nd)("price").notNull(),type:(0,a.Qq)("type").notNull()}),(0,s.cJ)("chats_table",{id:(0,o.vX)("id").primaryKey(),userId:(0,n.nd)("user_id").notNull().references(()=>l.id,{onDelete:"cascade"}),hostId:(0,n.nd)("host_id").notNull().references(()=>d.id,{onDelete:"cascade"}),messages:(0,u.Fx)("messages").notNull().default([])})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,452,884],()=>r(7934));module.exports=s})();